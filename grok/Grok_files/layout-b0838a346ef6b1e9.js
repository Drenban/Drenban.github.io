!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0bc9338a-aa75-4870-88bc-595d1090006d",e._sentryDebugIdIdentifier="sentry-dbid-0bc9338a-aa75-4870-88bc-595d1090006d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{93434:function(e,t,s){Promise.resolve().then(s.t.bind(s,6240,23)),Promise.resolve().then(s.bind(s,29779)),Promise.resolve().then(s.bind(s,44024)),Promise.resolve().then(s.bind(s,31352)),Promise.resolve().then(s.bind(s,30153)),Promise.resolve().then(s.bind(s,68100)),Promise.resolve().then(s.bind(s,34010)),Promise.resolve().then(s.bind(s,53981)),Promise.resolve().then(s.bind(s,34549)),Promise.resolve().then(s.bind(s,73805)),Promise.resolve().then(s.bind(s,29390)),Promise.resolve().then(s.bind(s,93099)),Promise.resolve().then(s.bind(s,62529)),Promise.resolve().then(s.bind(s,16385)),Promise.resolve().then(s.bind(s,813)),Promise.resolve().then(s.bind(s,24739)),Promise.resolve().then(s.bind(s,63746)),Promise.resolve().then(s.bind(s,21846)),Promise.resolve().then(s.bind(s,96021)),Promise.resolve().then(s.bind(s,64463)),Promise.resolve().then(s.bind(s,51678)),Promise.resolve().then(s.bind(s,56534)),Promise.resolve().then(s.bind(s,81812)),Promise.resolve().then(s.bind(s,6988)),Promise.resolve().then(s.bind(s,59682)),Promise.resolve().then(s.bind(s,94553)),Promise.resolve().then(s.bind(s,81695)),Promise.resolve().then(s.t.bind(s,87541,23)),Promise.resolve().then(s.t.bind(s,98416,23)),Promise.resolve().then(s.t.bind(s,68851,23)),Promise.resolve().then(s.bind(s,43756)),Promise.resolve().then(s.bind(s,55719)),Promise.resolve().then(s.bind(s,39460)),Promise.resolve().then(s.bind(s,24141))},29779:function(e,t,s){"use strict";s.d(t,{Loadout:function(){return eG}});var n=s(28381);s(72816);var a=s(99437),i=s(59566),r=s(11131),l=s(63222),o=s(88674),c=s(53465),d=s(77390),u=s(12302),m=s(86896),f=s(96239),x=s(83646);function h(){let e=(0,r.g)(),t=(0,m.useMemo)(()=>{let t=v.safeParse(e.BANNER.value);if(t.success)return t.data},[e.BANNER.value]),[s,a]=(0,f.Z)("banner-".concat(null==t?void 0:t.sentAt),!1),x=(0,m.useMemo)(()=>{if(t)switch(t.type){case"log":return(0,n.jsx)(o.Z,{className:"mr-0.5",size:18});case"warn":return(0,n.jsx)(c.Z,{className:"mr-0.5",size:18});case"error":return(0,n.jsx)(d.Z,{className:"mr-0.5",size:18})}},[null==t?void 0:t.type]),h=(0,m.useCallback)(()=>{a(!0)},[]);if(!s&&t&&t.message)return(0,n.jsxs)("div",{className:(0,l.cn)("absolute top-4 right-1/2 translate-x-1/2 z-50","flex flex-row items-center gap-3","bg-card rounded-2xl ring-1 ring-inset ring-toggle-border","mx-4 py-3 pl-4 pr-3 min-w-[300px] max-w-full lg:max-w-3/5 w-fit"),children:[x,t.message,(0,n.jsx)(i.zx,{className:"ml-auto",variant:"ghostSecondary",size:"iconSm",onClick:h,children:(0,n.jsx)(u.Z,{size:18})})]})}let v=x.z.object({sentAt:x.z.string().catch(new Date().toISOString()),type:x.z.union([x.z.literal("log"),x.z.literal("warn"),x.z.literal("error")]).catch("error"),message:x.z.string().catch("")}).catch({sentAt:new Date().toISOString(),type:"log",message:""});var p=s(68100),g=s(86210),j=s(37114),b=s(2363),w=()=>{let[e,t]=(0,f.Z)("anonUserId"),[s,n]=(0,f.Z)("anonPrivateKey"),{user:a,anonUser:i,refreshAnonUser:r}=(0,p.useSession)(),l=(0,m.useCallback)(async()=>{let{privateKey:e,anonUserId:s}=await (0,g.b)();t(s),n(e),await r(s,e)},[]);return(0,m.useEffect)(()=>{let t=async()=>{e&&s?await r(e,s).catch(()=>l()):await l()};a||e&&s&&i||t().catch(e=>{b.Am.error("Failed to initialize session"),(0,j.H)("session-store-init",e)})},[e,s]),null},y=s(54033);let N=y.fC;y.xz;let P=y.h_,k=m.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(y.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-overlay data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});k.displayName=y.aV.displayName;let E=m.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsxs)(P,{children:[(0,n.jsx)(k,{}),(0,n.jsx)(y.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 ring-1 ring-inset ring-popover-border bg-popover p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-3xl",s),...a})]})});E.displayName=y.VY.displayName;let S=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};S.displayName="AlertDialogHeader";let z=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};z.displayName="AlertDialogFooter";let C=m.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(y.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",s),...a})});C.displayName=y.Dx.displayName;let I=m.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(y.dk,{ref:t,className:(0,l.cn)("text-sm text-secondary",s),...a})});I.displayName=y.dk.displayName;let T=m.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(y.aU,{ref:t,className:(0,l.cn)((0,i.dc)({variant:"primary"}),s),...a})});T.displayName=y.aU.displayName;let Z=m.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(y.$j,{ref:t,className:(0,l.cn)((0,i.dc)({variant:"ghost"}),"mt-2 sm:mt-0",s),...a})});Z.displayName=y.$j.displayName;var M=s(15861),R=s(90482),L=s(25168);function O(e){let{startTimeMs:t,onComplete:s}=e,a=(0,m.useRef)(null),i=(0,m.useRef)();return(0,m.useEffect)(()=>{if(!a.current)return;let e=e=>{a.current&&(a.current.textContent=(e/1e3).toString())};e(t);let n=t,r=setInterval(()=>{if((n-=1e3)<0){clearInterval(r),null==s||s();return}e(n)},1e3);return i.current=()=>clearInterval(r),()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.call(i)}},[t,s]),(0,n.jsx)("span",{ref:a})}let _={title:"Are you still there?",reset:"Reset my chats",confirm:"I'm still here"};function W(){let{t:e}=(0,L.$G)("base"),[t,s]=function(e){let{timeToWarningMs:t,gracePeriodMs:s}=e,[n,a]=(0,m.useState)("active"),[i,r]=(0,m.useState)(!0),l=(0,m.useCallback)(()=>{a("active"),r(!0)},[]);return(0,m.useEffect)(()=>{let e,n;let o=()=>{i&&(clearTimeout(e),clearTimeout(n),l(),e=setTimeout(()=>{a("warning"),r(!1)},t))},c=["mousedown","mousemove","keypress","scroll","touchstart"];return i?(c.forEach(e=>{document.addEventListener(e,o,!0)}),e=setTimeout(()=>{a("warning"),r(!1)},t)):n=setTimeout(()=>{a("inactive")},s),()=>{i?(c.forEach(e=>{document.removeEventListener(e,o,!0)}),clearTimeout(e)):clearTimeout(n)}},[t,s,l,i]),[n,l]}({timeToWarningMs:3e5,gracePeriodMs:6e4}),a=(0,p.useSession)(),r=(0,m.useCallback)(()=>{a.clearUser(),window.location.reload(),localStorage.clear(),function(){for(let e of document.cookie.split(";")){let t=e.indexOf("="),s=t>-1?e.substr(0,t):e;document.cookie=s+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}}()},[a]);(0,m.useEffect)(()=>{"inactive"===t&&r()},[t]);let l=(0,m.useCallback)(()=>{s()},[]),o=(0,R.w)();if("active"===t)return null;let c=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.cC,{i18nKey:"Your chats will be deleted after",components:{timer:(0,n.jsx)("span",{className:"text-sunset",children:(0,n.jsx)(O,{startTimeMs:6e4})})},values:{minutes:Math.ceil(5)}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)(L.cC,{i18nKeys:"To permanently save",children:["To permanently save your chats you must ",(0,n.jsx)("b",{children:"sign in"}),"."]})]});return o?(0,n.jsx)(M.dy,{dismissible:!1,open:"warning"===t,children:(0,n.jsxs)(M.sc,{children:[(0,n.jsx)(M.OX,{children:(0,n.jsx)(M.iI,{children:e(_.title)})}),(0,n.jsx)("div",{className:"p-4 text-primary",children:c()}),(0,n.jsxs)(M.ze,{children:[(0,n.jsx)(i.zx,{variant:"ghost",onClick:r,children:e(_.reset)}),(0,n.jsx)(i.zx,{onClick:l,variant:"primary",children:e(_.confirm)})]})]})}):(0,n.jsx)(N,{open:"warning"===t,children:(0,n.jsxs)(E,{children:[(0,n.jsxs)(S,{children:[(0,n.jsx)(C,{children:e(_.title)}),(0,n.jsx)(I,{className:"text-primary",children:c()})]}),(0,n.jsxs)(z,{children:[(0,n.jsx)(Z,{onClick:r,children:e(_.reset)}),(0,n.jsx)(T,{onClick:l,children:e(_.confirm)})]})]})})}var D=s(87399),F=s(13296),A=s(75114),U=s(83934),$=s(35657),G=()=>{let[e,t]=(0,m.useState)(!0);return(0,m.useEffect)(()=>{let e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),e},H=s(48044),V=()=>((0,m.useEffect)(()=>{H.t.getState().fetchFirstPage({}).catch(()=>{(0,j.H)("conversation-store-init","Failed to load conversations")})},[]),null),Y=s(34010),K=s(70836),q=s.n(K),B=s(56246),X=s(75522),J=s(68603),Q=s(36572),ee=s(37629),et=s(44406),es=s(63137),en=s(90431),ea=s(15824),ei=s(19183);function er(e){let{children:t,isVisible:s,minWidth:a,maxWidth:i,initialWidth:r,className:o}=e,[c,d]=(0,m.useState)(!1),[u,f]=(0,m.useState)(r);(0,m.useRef)(u).current=u;let x=(0,m.useRef)(null),h=(0,m.useRef)(document.body.clientWidth);(0,m.useEffect)(()=>{f(r)},[r]);let v=(0,m.useCallback)(e=>{e.preventDefault(),d(!0)},[]),p=(0,m.useCallback)(()=>{d(!1)},[]),g=(0,m.useCallback)(e=>{c&&x.current&&f(Math.max(a,Math.min(i,document.body.clientWidth-e.clientX)))},[c,a,i]),j=(0,m.useCallback)(()=>{f(Math.max(a,Math.min(i,r/h.current*document.body.clientWidth)))},[a,i,r]);return(0,m.useEffect)(()=>(window.addEventListener("mousemove",g),()=>window.removeEventListener("mousemove",g)),[g]),(0,m.useEffect)(()=>(window.addEventListener("mouseup",p),()=>window.removeEventListener("mouseup",p)),[p]),(0,m.useEffect)(()=>(window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)),[j]),(0,n.jsx)(ea.M,{children:s&&(0,n.jsx)(ei.E.div,{initial:{x:u,opacity:0,width:0},animate:{x:0,opacity:1,width:u},exit:{x:u,opacity:0,width:0},transition:c?{duration:0}:{type:"ease",ease:"easeInOut",duration:.2},className:(0,l.cn)("h-dvh flex-shrink-0",o),children:(0,n.jsxs)("div",{ref:x,className:"relative h-full w-full",children:[(0,n.jsx)("div",{className:(0,l.cn)("absolute start-0 top-0 bottom-0 w-2 cursor-col-resize border-l border-input-border hover:bg-card-hover z-50",c&&"bg-card-hover"),onMouseDown:v}),(0,n.jsx)("div",{className:"h-full p-0",children:t})]})})})}var el=s(78215),eo=s(56794),ec=s(37289),ed=s(44024),eu=s(27606),em=s(43282),ef=s(42337),ex=s(98948),eh=s(32543),ev=s(53735),ep=s(33731),eg=s(81695),ej=s(91033),eb=s(51528),ew=s(65072),ey=s(97970);function eN(e){let{fileMetadata:t}=e,{t:s}=(0,L.$G)("chat"),{ASSET_SERVER_URL:a}=(0,ed.O)(),{data:i,isLoading:r,error:l}=(0,ef.aM)({queryKey:["asset",t.fileMetadataId],queryFn:async()=>await (0,em.Z)(a,t.fileUri)});if(r)return(0,n.jsxs)("div",{className:"p-4",children:[s("Loading"),"..."]});if(l)return(0,n.jsx)("div",{className:"p-4",children:s("Error: Could not access this content")});if(t.fileMimeType.startsWith("text/"))return(0,n.jsx)(eE,{assetUrl:i,fileMetadata:t});switch(t.fileMimeType){case"image/jpeg":case"image/png":case"image/webp":return(0,n.jsx)(eP,{assetUrl:i,fileMetadata:t});case"application/json":case"application/csv":case"application/x-yaml":case"application/xml":case"application/toml":case"":return(0,n.jsx)(eE,{assetUrl:i,fileMetadata:t});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return(0,n.jsx)(eS,{assetUrl:i,fileMetadata:t});default:return(0,n.jsx)(ez,{assetUrl:i,fileMetadata:t})}}function eP(e){let{assetUrl:t,fileMetadata:s,showControls:a=!1}=e,[r,l]=(0,m.useState)(!0);(0,m.useEffect)(()=>{if(!t){l(!1);return}let e=new Image;return e.src=t,e.onload=()=>l(!1),e.onerror=()=>l(!1),()=>{e.onload=null,e.onerror=null}},[t]);let o=(0,m.useCallback)(()=>{if(!t)return;let e=document.createElement("a");e.href=t,e.target="_blank",e.download=s.fileName,document.body.appendChild(e),e.click(),document.body.removeChild(e)},[t,s]);return a?(0,n.jsx)("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto","data-vaul-no-drag":!0,children:(0,n.jsx)("div",{className:"relative w-full max-w-4xl mx-auto",children:(0,n.jsx)(ey.d$,{initialScale:1,initialPositionX:0,initialPositionY:0,children:e=>{let{zoomIn:a,zoomOut:l,resetTransform:c}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"absolute end-4 bottom-4 z-10 flex space-x-1 rounded-full bg-background p-1 opacity-80",children:[(0,n.jsx)(i.zx,{onClick:()=>a(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom In",children:(0,n.jsx)(ex.Z,{className:"h-4 w-4"})}),(0,n.jsx)(i.zx,{onClick:()=>l(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom Out",children:(0,n.jsx)(eh.Z,{className:"h-4 w-4"})}),(0,n.jsx)(i.zx,{onClick:()=>c(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,n.jsx)(ev.Z,{className:"h-4 w-4"})}),(0,n.jsx)(i.zx,{onClick:o,variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,n.jsx)(ep.Z,{className:"h-4 w-4"})})]}),(0,n.jsx)(ey.Uv,{wrapperClass:"!w-full bg-primary/50 rounded-lg",children:(0,n.jsx)("img",{src:t,alt:s.fileName,className:"w-full h-auto shadow-md",onLoad:()=>l(),style:{maxHeight:"70vh"}})}),r&&(0,n.jsx)(eu.O,{className:"w-full h-[70vh] rounded-lg"})]})}})})}):(0,n.jsx)("img",{src:t,alt:s.fileName,className:"w-[94vw] max-h-[calc(100vh-10rem)] max-w-6xl shadow cursor-pointer rounded-xl lg:w-fit object-contain"})}let ek=["text/plain","text/csv","application/csv"];function eE(e){let{assetUrl:t,fileMetadata:s}=e,{t:a}=(0,L.$G)("chat"),{resolvedTheme:i}=(0,eg.F)(),{isLoading:r,error:l,data:o}=(0,ef.aM)({queryKey:["text-asset",t],queryFn:async()=>{if(!t)throw Error("Asset URL is required");let e=await fetch(t,{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));return await e.text()},enabled:!!t});if(r)return(0,n.jsx)("div",{className:"p-4",children:a("Loading text…")});if(l)return(0,n.jsx)("div",{className:"p-4",children:a("errorMessage",{error:l.message})});if(!o)return(0,n.jsx)("div",{className:"p-4",children:a("No text content available.")});let c=o.length>16384,d=ek.includes(s.fileMimeType),u=c||d?(0,n.jsx)("pre",{className:"w-full p-4 rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4 bg-foreground",children:o}):(0,n.jsx)("div",{className:"w-full rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4",children:(0,n.jsx)(ej.Z,{style:"dark"===i?eb.Z:ew.Z,customStyle:{background:"dark"===i?"#121314":"var(--foreground)"},children:o})});return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto",children:u})}function eS(e){let{assetUrl:t,fileMetadata:s}=e,{t:a}=(0,L.$G)("chat");return t?(0,n.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg mb-4",children:(0,n.jsx)("a",{href:t,download:s.fileName||"download",children:(0,n.jsx)(i.zx,{children:a("Download Asset")})})}):null}function ez(e){let{assetUrl:t,fileMetadata:s}=e,a=(0,m.useRef)(null);return(0,m.useEffect)(()=>{let e=()=>{if(a.current){let e=window.innerWidth<R.G,t=window.innerHeight*(e?.7:.9);a.current.style.height="".concat(t,"px")}};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),(0,n.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg mb-4",children:(0,n.jsx)("iframe",{ref:a,src:t,width:"100%",height:"800px",title:s.fileName,className:"rounded-lg shadow-md"})})}var eC=s(34535),eI=s(12018),eT=s(55664),eZ=s(32092);let eM=(0,s(21041).U)(e=>({previewMode:"desktop",setPreviewMode:t=>e({previewMode:t}),isRefreshing:!1,refresh:()=>{e({isRefreshing:!0}),setTimeout(()=>e({isRefreshing:!1}),100)}}));var eR=s(49089),eL=s(65735),eO=s(56180);function e_(){let{t:e}=(0,L.$G)("chat"),{previewMode:t,setPreviewMode:s}=eM();return(0,n.jsx)(eZ.mQ,{className:"flex-1 flex-row justify-center flex",defaultValue:"desktop",value:t,onValueChange:e=>s(e),children:(0,n.jsxs)(eZ.dr,{children:[(0,n.jsxs)(eZ.SP,{className:"gap-1",value:"desktop",children:[(0,n.jsx)(eR.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"hidden md:inline",children:e("Wide")})]}),(0,n.jsxs)(eZ.SP,{className:"gap-1",value:"mobile",children:[(0,n.jsx)(eL.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"hidden md:inline",children:e("Mobile")})]})]})})}function eW(){let{refresh:e}=eM(),{t}=(0,L.$G)("chat");return(0,n.jsx)("div",{className:"flex gap-2 items-center",children:(0,n.jsxs)(D.u,{delayDuration:100,children:[(0,n.jsx)(D.aJ,{asChild:!0,children:(0,n.jsx)(i.zx,{variant:"outline",size:"icon",onClick:e,children:(0,n.jsx)(eO.Z,{size:16})})}),(0,n.jsx)(D._v,{children:(0,n.jsx)("p",{children:t("Refresh")})})]})})}function eD(e){let{html:t}=e,{previewMode:s,isRefreshing:a}=eM();return(0,n.jsx)("div",{className:"h-full bg-foreground dark:bg-background",children:(0,n.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,n.jsx)("div",{className:(0,l.cn)("bg-background-secondary flex-1 flex flex-col"),children:(0,n.jsx)("div",{className:(0,l.cn)("flex-1 bg-foreground","mobile"===s&&"max-w-lg mx-auto"),children:a?null:(0,n.jsx)("iframe",{className:"w-full h-full",sandbox:"allow-scripts",srcDoc:t})})})})})}var eF=s(2969),eA=s(16726);let eU=e=>{let{responseId:t}=e,[s,a]=(0,m.useState)(""),i=(0,eF.CI)(e=>e.byId[t]);return(0,m.useEffect)(()=>{let e=setInterval(()=>{var e;a((null===(e=i.steps)||void 0===e?void 0:e.map(e=>{var t,s,n;if(!(null===(t=e.tags)||void 0===t?void 0:t.includes("assistant")))return"";let a=null===(s=e.tags)||void 0===s?void 0:s.indexOf("assistant");return(null===(n=e.text)||void 0===n?void 0:n[a])||""}).join(" "))||"")},100);return()=>clearInterval(e)},[i.steps]),(0,n.jsx)(eA._I,{sender:"assistant",webSearchResults:[],xposts:[],children:s})};function e$(){var e;let{t}=(0,L.$G)("chat"),s=(0,R.w)(),a=(0,eC.gK)(ee.Z("sidePanelContent")),r=(0,eC.gK)(ee.Z("setSidePanelContent")),o=["htmlPreview","artifact"].includes(null!==(e=null==a?void 0:a.type)&&void 0!==e?e:""),c=(null==a?void 0:a.type)==="thinkingTrace"?740:.62*document.body.clientWidth,d=()=>{let e,o,c;if(!a)return null;let{type:d,data:m}=a,f=null,x=null;switch(d){case"asset":e=(0,n.jsx)(ec.Z,{className:"!size-5"}),o=m.fileName.length>0?m.fileName:"File",c=(0,n.jsx)(eN,{fileMetadata:m});break;case"webSearchResults":o=t("Search Results"),c=(0,n.jsx)("div",{className:"flex flex-col items-center gap-2 px-2 pb-2",children:m.map(e=>(0,n.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,n.jsx)(en.Fg,{webSearchResult:e})},e.citationId))});break;case"xPosts":o=t("\uD835\uDD4F Posts"),c=(0,n.jsx)("div",{className:"flex flex-col items-center",children:m.map(e=>(0,n.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,n.jsx)(en.jW,{xPost:e})},e.citationId))});break;case"thinkingTrace":o=t("Thoughts"),c=(0,n.jsx)(ei.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.15},className:"[&>*:first-child]:mt-0 h-fit overflow-x-auto w-full focus:outline-none focus-within:outline-none px-3 prose dark:prose-invert",children:(0,n.jsx)(eU,{responseId:m.responseId})});break;case"artifact":o=null,c=(0,n.jsx)(eT.k,{artifact:m}),x=null,f=(0,n.jsx)(eI.z,{artifact:m});break;case"htmlPreview":f=(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsx)(e_,{}),(0,n.jsx)(eW,{})]}),c=(0,n.jsx)(eD,{html:m});break;default:throw Error("Unknown side panel content type")}return(0,n.jsxs)("aside",{className:"max-h-[95dvh] h-[95dvh] md:max-h-none md:h-full flex flex-col w-full overflow-y-auto overflow-x-hidden bg-background-secondary",children:[(0,n.jsxs)("div",{className:"flex z-10 flex-row items-center justify-between flex-shrink-0 w-full pt-2 md:pt-0 h-14 md:h-16 px-2 md:px-5 sticky top-0 bg-gradient-to-b from-background-secondary via-background-secondary via-80% to-transparent",children:[f||(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center max-w-[80%]",children:[e&&(0,n.jsx)("div",{className:"flex-shrink-0",children:e}),(0,n.jsx)("div",{className:"truncate text-base overflow-hidden font-medium",children:s?(0,n.jsx)(el.$N,{children:o}):o})]}),x,(0,n.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[null,(0,n.jsxs)(D.u,{delayDuration:100,children:[(0,n.jsx)(D.aJ,{asChild:!0,children:(0,n.jsx)(i.zx,{variant:"ghost",size:"icon",onClick:()=>r(void 0),className:"flex-shrink-0",children:(0,n.jsx)(u.Z,{size:20,strokeWidth:2})})}),(0,n.jsx)(D._v,{children:(0,n.jsx)("p",{children:t("Close")})})]})]})]}),(0,n.jsx)("div",{className:(0,l.cn)("flex-grow w-full h-fit overflow-y-visible",(null==a?void 0:a.type)==="artifact"&&"overflow-y-auto min-h-0 flex-1 p-0"),children:c})]})};return s?(0,n.jsx)(M.dy,{open:!!a,onOpenChange:e=>r(e?a:void 0),children:(0,n.jsx)(M.sc,{className:"focus:outline-none",children:d()})}):a&&"asset"===a.type&&a.data.fileMimeType.startsWith("image/")?(0,n.jsx)(eo.Vq,{open:!!a,onOpenChange:e=>{r(e?a:void 0)},children:(0,n.jsxs)(el.PK,{children:[(0,n.jsx)(el.t9,{}),(0,n.jsx)(el.cZ,{className:"h-full w-full bg-transparent",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",onClick:()=>r(void 0),children:[(0,n.jsx)(eN,{fileMetadata:a.data}),(0,n.jsx)("div",{className:"absolute flex-col justify-between hidden lg:flex end-3 inset-y-3",children:(0,n.jsx)(i.zx,{variant:"ghost",size:"iconXl",onClick:e=>{e.stopPropagation(),r(void 0)},children:(0,n.jsx)(u.Z,{className:"size-5"})})})]})})]})}):(0,n.jsx)(er,{isVisible:!!a,minWidth:288,maxWidth:c,initialWidth:o?.5*document.body.clientWidth:480,className:"max-w-[66%] xl:max-w-none",children:d()})}function eG(e){let{children:t}=e,s=(0,r.g)(),i=(0,H.t)(ee.Z("list")),l=(0,U.r)(),o=(0,p.useSession)(),c=(0,Q.usePathname)(),d="/"===c||(null==c?void 0:c.startsWith("/chat"))||(null==c?void 0:c.startsWith("/share")),u=(0,J.F)(ee.Z("showAgeVerification")),f=(0,J.F)(ee.Z("ageVerificationCallback"));(0,m.useEffect)(()=>{o.user&&J.F.getState().fetchGetUserSettings().catch(()=>(0,j.H)("loadout","Failed to load user settings"))},[o.user]),function(e){let{personalityPresets:t}=function(){let e=(0,r.g)(),t=(0,m.useMemo)(()=>{let t=(e.PERSONALITY_PRESETS.value.personalityPresets&&Array.isArray(e.PERSONALITY_PRESETS.value.personalityPresets)?e.PERSONALITY_PRESETS.value.personalityPresets:[]).map(e=>X.xn.safeParse(e)).filter(e=>e.success).map(e=>({...e.data,isPreset:!0}));return q().keyBy(t,e=>e.personalityId)},[e.PERSONALITY_PRESETS.value]);return{personalityPresets:(0,m.useMemo)(()=>Object.values(t),[t]),personalityPresetById:t}}();(0,m.useEffect)(()=>{X.Zv.getState().appendPersonalities(t)},[t]),(0,m.useEffect)(()=>{e.user&&X.Zv.getState().fetchListPersonalities().catch(e=>(0,j.H)("loadout:fetchList","Failed to load custom personalities: ".concat(e)))},[e.user])}(o);let x=(0,$.bP)();return(0,m.useEffect)(()=>{x.isPending||B.p.setState(x)},[x]),(0,m.useEffect)(()=>{!function(){let e=!1,t=0,s=0,n=null;function a(){"visible"===document.visibilityState&&(e||(e=!0,t=performance.now()),null!==n&&clearTimeout(n),n=setTimeout(i,1e4))}function i(){if(e){e=!1;let n=performance.now()-t;s+=n,null===Y.IW||void 0===Y.IW||Y.IW.logEvent("session_active_time",n,{sessionActiveTimeMs:n.toString(),totalActiveTimeMs:s.toString()})}}document.addEventListener("mousemove",q().throttle(a,500)),document.addEventListener("keydown",q().throttle(a,500)),document.addEventListener("click",q().throttle(a,500)),document.addEventListener("scroll",q().throttle(a,500)),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&e&&i(),"visible"!==document.visibilityState||e||a()}),window.addEventListener("beforeunload",()=>{e&&i()})}()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(et.W,{backend:es.PD,children:(0,n.jsxs)(D.pn,{delayDuration:100,skipDelayDuration:0,disableHoverableContent:!0,children:[!o.user&&!l&&!!i.length&&(0,n.jsx)(W,{}),(0,n.jsxs)("div",{className:"flex w-full h-full @container/mainview",children:[(0,n.jsx)(h,{}),(0,n.jsxs)("div",{className:"flex w-full h-full",children:[u&&!o.user&&(0,n.jsx)(a.l,{onPass:f}),o.user&&d&&(0,n.jsx)(V,{}),d&&(0,n.jsx)(w,{}),t]}),(0,n.jsx)(e$,{})]}),s.SHOW_X_PREMIUM_FLOWS&&!s.SHOW_SUBSCRIPTION_FLOWS&&(0,n.jsx)(A.ev,{}),s.SHOW_SUBSCRIPTION_FLOWS&&(0,n.jsx)(F.ev,{}),(0,n.jsx)(eH,{})]})}),!1]})}function eH(){let{t:e}=(0,L.$G)("base"),t=G(),s=(0,m.useRef)(null);return(0,m.useEffect)(()=>{t||s.current?s.current&&(b.Am.dismiss(s.current),s.current=null):s.current=b.Am.error(e("You are offline"),{duration:1/0})},[t]),null}},31352:function(e,t,s){"use strict";let n;s.d(t,{default:function(){return o}});var a=s(28381),i=s(42337);let r=()=>new i.Su({defaultOptions:{queries:{staleTime:6e4}}}),l=()=>i.sk?r():(n||(n=r()),n);var o=e=>{let{children:t}=e,s=l();return(0,a.jsx)(i.aH,{client:s,children:t})}},30153:function(e,t,s){"use strict";s.d(t,{default:function(){return i}});var n=s(28381);s(69005);var a=(0,s(7938).$)("1dbdcc7cea997e5f38b0157ff63e41ccbba3fb93"),i=e=>{let{activeRoute:t,allRoutes:s,override:i}=e;return(0,n.jsxs)("div",{className:"absolute top-0 text-center flex-row flex justify-center items-center gap-2 text-red-600 z-[999] w-full text-xs",children:["[",(0,n.jsx)("div",{title:t,className:"text-ellipsis overflow-hidden whitespace-nowrap text-center",children:t}),"|",(0,n.jsxs)("select",{onChange:async e=>{await a(e.target.value),window.location.reload()},value:i,className:"w-24 text-ellipsis overflow-hidden bg-transparent",children:[(0,n.jsx)("option",{value:"",children:"No override"}),s.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),"]"]})}},27606:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var n=s(28381),a=s(63222);function i(e){let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},53981:function(e,t,s){"use strict";s.d(t,{Toaster:function(){return o}});var n=s(28381),a=s(63222),i=s(77390),r=s(81695),l=s(2363);let o=e=>{let{...t}=e,{theme:s}=(0,r.F)();return(0,n.jsx)(l.x7,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:(0,a.cn)("group toast bg-popover rounded-2xl border-0 shadow-sm","w-fit min-w-[200px] right-0","ring-1 ring-inset ring-input-border","p-3.5 h-fit"),title:"text-primary font-bold",icon:"ml-0 mr-1",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},icons:{error:(0,n.jsx)(i.Z,{size:18})},...t})}},34549:function(e,t,s){"use strict";s.d(t,{default:function(){return c}});var n=s(28381),a=s(43927),i=s(67549),r=s(71167),l=s(86896),o=s(27276);function c(e){let{children:t}=e,[s,c]=(0,l.useState)(()=>(0,o.w1)(i.ZP.language)),{client:d}=(0,a.useStatsigClient)();return(0,l.useEffect)(()=>{let e=e=>{i.ZP.isInitializing||d.logEvent("locale_changed",e,{languages:i.ZP.languages.join(", "),location:"src/lib/locales/direction-provider"});let t=(0,o.w1)(e);"rtl"===t?document.body.dir=t:document.body.dir="",c(t)};return i.ZP.on("languageChanged",e),()=>i.ZP.off("languageChanged",e)},[]),(0,n.jsx)(r.zt,{dir:s,children:t})}},6240:function(){}},function(e){e.O(0,[7099,6834,6800,7975,1805,6299,536,9782,2025,3766,47,1758,4555,7798,8064,2496,6439,1234,5539,4535,7404,3296,8593,9124,2063,5386,3691,1744],function(){return e(e.s=93434)}),_N_E=e.O()}]);