!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6c0a1fbb-8871-4b07-848f-db36e9d043df",e._sentryDebugIdIdentifier="sentry-dbid-6c0a1fbb-8871-4b07-848f-db36e9d043df")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9124],{12018:function(e,t,n){"use strict";n.d(t,{z:function(){return J}});var r=n(28381),a=n(59566),i=n(87399),l=n(62367),s=n(28986),c=n(45512),o=n(42337),d=n(97369),u=n(18692),f=n(56180),p=n(64582),h=n(11183),x=n(33731),g=n(46824),m=n(33942),v=n(86896),b=n(25168),j=n(2363),y=n(34535),w=n(32092),k=n(93508),C=n(4043);function N(){let{t:e}=(0,b.$G)("chat"),{mode:t,setMode:n}=(0,s.n)();return(0,r.jsx)(w.mQ,{className:"flex-1 flex-row justify-center flex",defaultValue:"code",value:t,onValueChange:e=>n(e),children:(0,r.jsxs)(w.dr,{children:[(0,r.jsxs)(w.SP,{className:"gap-1",value:"code",children:[(0,r.jsx)(k.Z,{className:"size-4"}),(0,r.jsx)("span",{className:"hidden md:inline",children:e("Code")})]}),(0,r.jsxs)(w.SP,{className:"gap-1",value:"preview",children:[(0,r.jsx)(C.Z,{className:"size-4"}),(0,r.jsx)("span",{className:"hidden md:inline",children:e("Preview")})]})]})})}function J(e){var t,n;let{artifact:w,standalone:k}=e,{t:C}=(0,b.$G)("chat"),{artifactsByConversationId:J,refresh:z,mode:S}=(0,s.n)(),{setSidePanelContent:A}=(0,y.gK)(),[E,I]=(0,v.useState)(!1),[D,_]=(0,v.useState)(!1),T=(0,v.useRef)(),{mutate:F}=(0,o.Db)({mutationFn:()=>l.chatApi.chatShareArtifact({conversationId:w.conversationId,body:{responseId:w.responseId}})}),R=(0,v.useCallback)(e=>{j.Am.error("Failed to share artifact"),e&&c.Tb(e)},[]),Z=(0,v.useCallback)(async()=>{let e=async()=>new Promise((e,t)=>{F(void 0,{onSuccess:n=>{if(!n.sharedArtifactId)return R(Error("Could't find sharedArtifactId")),t();e("".concat(window.location.origin,"/artifact/").concat(n.sharedArtifactId))},onError:e=>{R(e),t()}})});try{let t=await e(),n=new ClipboardItem({"text/plain":new Blob([t],{type:"text/plain"})});navigator.clipboard.write([n]).then(()=>{j.Am.success(C("Copied public artifact link to clipboard.")),_(!0),setTimeout(()=>_(!1),1e3)}).catch(e=>j.Am.error(e.message))}catch(e){R(e)}},[]),P=Object.values(null!==(n=J[null!==(t=w.conversationId)&&void 0!==t?t:""])&&void 0!==n?n:{}).flat(),V=P.findIndex(e=>e.timestamp===w.timestamp),L=-1!==V&&V>0,B=-1!==V&&V<P.length-1,H="text/html"===w.contentType,Q=(0,v.useCallback)(()=>{L&&A({type:"artifact",data:P[V-1]})},[L,A,P,V]),U=(0,v.useCallback)(()=>{B&&A({type:"artifact",data:P[V+1]})},[B,A,P,V]),M=(0,v.useCallback)(async()=>{w.content&&(await navigator.clipboard.writeText(w.content),I(!0),T.current&&(clearTimeout(T.current),T.current=void 0),T.current=setTimeout(()=>I(!1),2e3))},[w.content]),O=(0,v.useCallback)(()=>{if(w.content){let e=w.contentType||"plain/text",t=m.extension(e)||"txt",n=w.identifier||"".concat(Date.now().toString()),r=new Blob([w.content],{type:e}),a=window.URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download="".concat(n,".").concat(t),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)}},[w.content,w.contentType,w.identifier]);return w.identifier?(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[H?(0,r.jsx)("div",{className:"pr-4",children:(0,r.jsx)(N,{})}):null,k?null:(0,r.jsxs)("div",{className:"gap-2 items-center hidden md:flex",children:[(0,r.jsxs)(i.u,{delayDuration:100,children:[(0,r.jsx)(i.aJ,{asChild:!0,children:(0,r.jsx)(a.zx,{variant:"ghostSecondary",size:"icon",onClick:Q,disabled:!L,children:(0,r.jsx)(d.Z,{size:16})})}),(0,r.jsx)(i._v,{children:(0,r.jsx)("p",{children:C("Previous version")})})]}),(0,r.jsxs)(i.u,{delayDuration:100,children:[(0,r.jsx)(i.aJ,{asChild:!0,children:(0,r.jsx)(a.zx,{variant:"ghostSecondary",size:"icon",onClick:U,disabled:!B,children:(0,r.jsx)(u.Z,{size:16})})}),(0,r.jsx)(i._v,{children:(0,r.jsx)("p",{children:C("Next version")})})]})]}),H&&(0,r.jsxs)(i.u,{delayDuration:100,children:[(0,r.jsx)(i.aJ,{asChild:!0,children:(0,r.jsx)(a.zx,{variant:"ghostSecondary",size:"icon",onClick:z,disabled:"code"===S,children:(0,r.jsx)(f.Z,{size:16})})}),(0,r.jsx)(i._v,{children:(0,r.jsx)("p",{children:C("Refresh")})})]}),(0,r.jsxs)(i.u,{delayDuration:100,children:[(0,r.jsx)(i.aJ,{asChild:!0,children:(0,r.jsx)(a.zx,{variant:"ghostSecondary",size:"icon",onClick:M,children:E?(0,r.jsx)(p.Z,{size:16}):(0,r.jsx)(h.Z,{size:16})})}),(0,r.jsx)(i._v,{children:(0,r.jsx)("p",{children:C("Copy Contents")})})]}),(0,r.jsxs)(i.u,{delayDuration:100,children:[(0,r.jsx)(i.aJ,{asChild:!0,children:(0,r.jsx)(a.zx,{variant:"ghostSecondary",size:"icon",onClick:O,children:(0,r.jsx)(x.Z,{size:16})})}),(0,r.jsx)(i._v,{children:(0,r.jsx)("p",{children:C("Download to file")})})]}),k?null:(0,r.jsxs)(i.u,{delayDuration:100,children:[(0,r.jsx)(i.aJ,{asChild:!0,children:(0,r.jsx)(a.zx,{variant:"ghostSecondary",size:"icon",onClick:Z,children:(0,r.jsx)(g.Z,{size:16})})}),(0,r.jsx)(i._v,{children:(0,r.jsx)("p",{children:D?C("Copied public link!"):C("Publish artifact")})})]})]}):null}},55664:function(e,t,n){"use strict";n.d(t,{k:function(){return Q}});var r=n(28381),a=n(63222),i=n(28986),l=n(86896),s=n(16726),c=n(61307),o=n(73690),d=n(81695),u=n(36894);let f=(0,n(44884).Cb)({settings:{background:"var(--background-secondary)",gutterBackground:"var(--background-secondary)",gutterForeground:"rgba(255,255,255,0.15)"}});var p=n(86486),h=n(73301);let x={background:"var(--background-secondary)",gutterBackground:"var(--background-secondary)",foreground:"#383A42",caret:"#526FFF",selection:"#E5E5E6",selectionMatch:"#E5E5E6",gutterForeground:"#9D9D9F",gutterBorder:"transparent",lineHighlight:"#383A420C"},g=[{tag:[p.pJ.function(p.pJ.variableName),p.pJ.function(p.pJ.propertyName),p.pJ.url,p.pJ.processingInstruction],color:"#4078F2"},{tag:[p.pJ.tagName,p.pJ.heading],color:"#E45649"},{tag:p.pJ.comment,color:"#A0A1A7",fontStyle:"italic"},{tag:[p.pJ.propertyName],color:"rgb(80, 161, 79)"},{tag:[p.pJ.attributeName,p.pJ.number],color:"rgb(152, 104, 1)"},{tag:p.pJ.className,color:"#C18401"},{tag:p.pJ.keyword,color:"#A626A4"},{tag:[p.pJ.string,p.pJ.regexp,p.pJ.special(p.pJ.propertyName)],color:"#50A14F"},{tag:p.pJ.operator,color:"#383A42"},{tag:p.pJ.variableName,color:"#E45649"}],m=(e=>{let{theme:t="light",settings:n={},styles:r=[]}=e||{};return(0,h.j)({theme:t,settings:{...x,...n},styles:[...g,...r]})})();n(58749);var v=n(14609),b=n(88555),j=n(14216),y=n(37975),w=n(71960),k=n(12993),C=n(59819),N=n(78570),J=n(56963),z=n(43354),S=n(88122),A=n(33083),E=n(47236),I=n(68045),D=n(10346),_=n(24420),T=n(1908),F=n(3742),R=n(40485),Z=n(12284);let P={html:w.dy,angular:v.G,cpp:b.N,css:j.iv,go:y.go,java:k.C,javascript:C.eJ,json:N.AV,liquid:z.Xu,less:J.d9,markdown:S.JH,php:A.h,python:E.Vs,rust:I.Q,sass:D.Xg,typescript:C.eJ,sql:_.i6,vue:T.L,wast:F.p,xml:R.Ls,yaml:Z.rV},V=new Set(Object.keys(P));function L(e){return V.has(e)?e:null}let B=[o.tk.lineWrapping];function H(e){let{value:t,onChange:n,className:i,lang:s,renderTooltip:c}=e,{resolvedTheme:p}=(0,d.F)(),{container:h,extension:x}=function(){let[e,t]=(0,l.useState)(null);return{extension:(0,l.useMemo)(()=>o.QQ.define({create:()=>null,update(n,r){var a,i;if(!r.selection)return n;if(r.docChanged)return null;let l=r.state,s=null===(a=l.selection)||void 0===a?void 0:a.ranges;return!s||1!==s.length||s[0].empty?null:null!==(i=l.selection.ranges.filter(e=>!e.empty).map(n=>({pos:n.head,above:!1,strictSide:!1,create:()=>{console.log("creating new again");let n=document.createElement("div");n.className="cm-tooltip-cursor";let r=e||document.createElement("div");return r.classList.add("mega-inner"),t(r),n.appendChild(r),{dom:n}}}))[0])&&void 0!==i?i:null},provide:e=>o.hJ.compute([e],t=>t.field(e))}),[]),container:e}}(),g=(0,l.useMemo)(()=>(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a=[...B,...n];if(e){let t=(0,P[e])();a.push(t)}return a})(s,x),[s,x]),[v,b]=(0,l.useState)(null),j=(0,l.useCallback)(e=>{b(e.state)},[b]),y=(0,l.useMemo)(()=>{if(!h||!c||!v)return null;let e=c(v);return u.createPortal(e,h)},[h,c,v]),w=(0,a.cn)(i,"code-editor-component [&_.cm-gutters]:pl-2");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.ZP,{className:w,value:t,onChange:n,theme:"dark"===p?f:m,extensions:g,editable:!!n,onUpdate:j}),y]})}function Q(e){var t,n,c,o;let{artifact:d}=e,{mode:u,setMode:f,isRefreshing:p}=(0,i.n)(),h=(0,l.useRef)(null),x=(0,l.useRef)(!0),g=["text/plain","text/markdown"],m=["text/html",...g].includes(null!==(t=d.contentType)&&void 0!==t?t:""),v="text/markdown"!=d.contentType,b=d.incomplete?s._I:s.Cn,j=v?u:"preview";(0,l.useEffect)(()=>{f(d.incomplete||!m?"code":"preview")},[d.incomplete]);let y=(0,l.useCallback)(()=>{if(!h.current)return;let e=h.current;e.scrollHeight-e.scrollTop-e.clientHeight<1?x.current=!0:x.current=!1},[]);(0,l.useEffect)(()=>{d.incomplete&&"code"===j&&h.current&&x.current&&(h.current.scrollTop=h.current.scrollHeight)},[d,j]);let w=function(e){if(!e)return null;if(e.startsWith("text/")){let t=L(e.slice(5));if(t)return t}if(e.startsWith("text/x-")){let t=L(e.slice(7));if(t)return t}return null}(d.contentType);return(0,r.jsx)("div",{className:"bg-foreground dark:bg-background h-full w-full overflow-y-auto",ref:h,onScroll:y,children:(0,r.jsx)("div",{className:"h-full w-full flex flex-col",children:(0,r.jsxs)("div",{className:(0,a.cn)("bg-background-secondary flex-1 flex flex-col"),children:["preview"===j&&(0,r.jsx)("div",{className:"flex-1 bg-background-secondary",children:g.includes(null!==(n=d.contentType)&&void 0!==n?n:"")?(0,r.jsx)("div",{className:"prose w-full p-14 max-w-4xl mx-auto",children:(0,r.jsx)(b,{sender:"",xposts:[],webSearchResults:[],children:null!==(c=d.content)&&void 0!==c?c:""})}):(0,r.jsx)(r.Fragment,{children:!p&&(0,r.jsx)(U,{srcDoc:null!==(o=d.content)&&void 0!==o?o:"",autofocus:!0})})}),"code"===j&&(0,r.jsx)(H,{lang:w,value:String(d.content).replace(/\n$/,"")})]})})})}function U(e){let{srcDoc:t,autofocus:n}=e,a=(0,l.useRef)(null),{isIframeReady:i,injectHTML:s}=(0,c.aX)({iframeRef:a});return(0,l.useEffect)(()=>{s(t)},[i,t]),(0,r.jsx)("iframe",{className:"w-full h-full",sandbox:"allow-scripts allow-same-origin",src:"https://artifacts2.grok.me",ref:a,onLoad:()=>{if(n){var e,t;null===(t=a.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.focus()}}})}},32092:function(e,t,n){"use strict";n.d(t,{SP:function(){return o},dr:function(){return c},mQ:function(){return s}});var r=n(28381),a=n(9719),i=n(86896),l=n(63222);let s=a.fC,c=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(a.aV,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center rounded-lg bg-ivory dark:bg-jet/20 p-1 text-secondary",n),...i})});c.displayName=a.aV.displayName;let o=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(a.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-foreground data-[state=active]:text-primary data-[state=active]:shadow",n),...i})});o.displayName=a.xz.displayName,i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(a.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...i})}).displayName=a.VY.displayName},58749:function(){}}]);